<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ouroom.web.item.ItemMapper">

<select id="list" resultType="com.ouroom.web.item.Item">
		<!-- select * from item i join category2 c where i.CATEGORY2_SEQ = c.SEQ and i.seq>82 order by i.seq desc; -->
		SELECT *
       FROM (
           SELECT
               ROW_NUMBER() OVER(ORDER BY A.SEQ DESC) AS NUM,
               A.*,c.category
           FROM
               item A join category2 c WHERE A.category2_seq=c.seq
       )B
       WHERE B.NUM BETWEEN  #{sp} AND #{ep}
       ORDER BY B.NUM;
		
	</select>
	
	<select id="count" resultType="int">
	select count(*) from item where seq>82 order by seq desc;
	</select>
	
	<select id="read" resultType="com.ouroom.web.item.Item">
	select * from item i join item_option io where i.seq = io.ITEM_SEQ and i.seq = #{seq};
	</select>
	
	<select id="c1" resultType="com.ouroom.web.item.Item">
	select * from category1;
	</select>
	<select id="c2" resultType="com.ouroom.web.item.Item">
	select * from category2 where CATEGORY1_SEQ=#{seq};
	</select>
	
	<select id="listSelect" resultType="com.ouroom.web.item.Item">
	
 SELECT *
       FROM (
           SELECT
               ROW_NUMBER() OVER(ORDER BY A.SEQ DESC) AS NUM,
               A.*,c.category
           FROM
               item A join category2 c WHERE A.category2_seq=c.seq and A.CATEGORY2_SEQ= #{category}
       )B
       WHERE B.NUM BETWEEN  #{sp} AND #{ep}
       ORDER BY B.NUM;
       
	</select>
	
	
</mapper>